<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sanctum of Offering</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* These styles ensure the page content fits properly in the iframe */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        /* Styles for form elements */
        .ritual-form {
            width: 100%;
            margin-bottom: 25px;
        }
        
        .ritual-group {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .ritual-label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #ddd;
            text-align: center;
        }
        
        .ritual-input {
            width: 80%;
            padding: 8px 12px;
            background-color: #111;
            border: 1px solid #333;
            color: white;
            font-family: 'RetroByte', sans-serif;
            border-radius: 4px;
            text-align: center;
        }
        
        .ritual-input::placeholder {
            color: #555;
            opacity: 1;
        }
        
        .offer-button {
            display: block;
            margin: 25px auto 0;
            padding: 10px 20px;
            background-color: #000;
            color: white;
            border: 1px solid #444;
            border-radius: 5px;
            font-family: 'RetroByte', sans-serif;
            cursor: url('assets/image/cursor_b.webp'), auto;
            transition: background-color 0.3s;
        }
        
        .offer-button:hover {
            background-color: #222;
            border-color: #666;
        }
        
        .divider {
            width: 70%;
            margin: 30px auto;
            border-top: 1px solid #333;
        }
        
        .altar-section {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .altar-label {
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: #ddd;
            width: 100%;
            text-align: center;
        }
        
        .altar-group {
            margin-bottom: 20px;
            text-align: center;
            width: 100%;
        }
        
        .ritual-confirmation {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(0,0,0,0.5);
            border: 1px solid #333;
            display: none;
        }
    </style>
</head>
<body>
    <div class="poems-container">
        <div class="poems-header">
            <h2>Sanctum of Offering</h2>
        </div>
        
        <div class="poems-content">
            <!-- Rituals Form -->
            <form class="ritual-form" action="#" method="post">
                <div class="ritual-group">
                    <label class="ritual-label" for="ritual1">First Ritual: "The Smallest Stars Are The Wisest"</label>
                    <input type="text" id="ritual1" name="ritual1" class="ritual-input" placeholder="offer your first relic">
                </div>
                
                <div class="ritual-group">
                    <label class="ritual-label" for="ritual2">Second Ritual: "Rules Are Not Sacred"</label>
                    <input type="text" id="ritual2" name="ritual2" class="ritual-input" placeholder="offer your second relic">
                </div>
                
                <div class="ritual-group">
                    <label class="ritual-label" for="ritual3">Third Ritual: "Happy Little Accidents"</label>
                    <input type="text" id="ritual3" name="ritual3" class="ritual-input" placeholder="offer your third relic">
                </div>
                
                <button type="button" id="offer-button" class="offer-button">offer your relics</button>
            </form>
            
            <div class="divider"></div>
            
            <!-- Confirmation message -->
            <div id="ritual-confirmation" class="ritual-confirmation">
                Your password is your name
            </div>
            
            <!-- The Altar Section -->
            <div class="altar-section" id="altar-section" style="display: none;">
                <div class="altar-label">The Altar</div>
                
                <!-- Exactly match the structure of the ritual groups -->
                <div class="ritual-group">
                    <input type="text" id="password" name="password" class="ritual-input" placeholder="what is your password?">
                </div>
                
                <button type="button" id="enter-button" class="offer-button">enter</button>
            </div>
        </div>
    </div>
    
    <script>
        // Direct access to DOM elements
        const ritual1Input = document.getElementById('ritual1');
        const ritual2Input = document.getElementById('ritual2');
        const ritual3Input = document.getElementById('ritual3');
        const offerButton = document.getElementById('offer-button');
        const confirmationMessage = document.getElementById('ritual-confirmation');
        const altarSection = document.getElementById('altar-section');
        const enterButton = document.getElementById('enter-button');
        
        function getAnswer(index) {
            const secretKeys = [
                [105, 110, 100, 105, 97, 110, 32, 115, 97, 98, 114, 101],
                [116, 114, 101, 97, 99, 104, 101, 114, 111, 117, 115, 32, 107, 110, 105, 102, 101],
                [112, 97, 116, 105, 101, 110, 99, 101, 32, 111, 102, 32, 115, 105, 108, 107]
            ];
            
            return secretKeys[index].map(code => String.fromCharCode(code)).join('');
        }
        
        // Simple validation function that compares inputs to the expected answers
        function checkRelics() {
            const val1 = ritual1Input.value.toLowerCase().trim();
            const val2 = ritual2Input.value.toLowerCase().trim();
            const val3 = ritual3Input.value.toLowerCase().trim();
            
            const answer1 = getAnswer(0);
            const answer2 = getAnswer(1);
            const answer3 = getAnswer(2);
            
            console.log('Input 1:', val1, 'Match:', val1 === answer1);
            console.log('Input 2:', val2, 'Match:', val2 === answer2);
            console.log('Input 3:', val3, 'Match:', val3 === answer3);
            
            // Return true only if all three match
            return val1 === answer1 && val2 === answer2 && val3 === answer3;
        }
        
        // Add click event for the offer button
        offerButton.addEventListener('click', function() {
            if (checkRelics()) {
                confirmationMessage.style.display = 'block';
                altarSection.style.display = 'block';
            } else {
                console.log("Validation failed - check your answers");
            }
        });
        
        // Add click event for the enter button
        enterButton.addEventListener('click', function() {
            if (confirmationMessage.style.display === 'block') {
                // Obfuscate the redirect path by building it dynamically
                const pathParts = [
                    'as', 'se', 'ts', '/', 'co', 'nt', 'en', 't', '/',
                    'al', 'bu', 'ms', '/', 'he', 'ar', 't.', 'ht', 'ml'
                ];
                window.parent.location.href = pathParts.join('');
            }
        });
    </script>
</body>
</html>